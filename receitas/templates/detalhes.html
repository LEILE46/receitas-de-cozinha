{% load static %}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>{{ receita.nome }}</title>
    <style>
        body {
            font-family: "Segoe UI", Arial, sans-serif;
            background-color: #fffaf4;
            color: #333;
            margin: 40px auto;
            max-width: 800px;
            padding: 0px;
            line-height: 1.6;
            border: 1px solid #eee;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
        }
        h1 {
            text-align: center;
            color: #d2691e;
            margin-bottom: 20px;
        }
        p {
            margin-bottom: 15px;
        }
        strong {
            color: #b34700;
        }
        img {
            display: block;
            margin: 20px auto;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        .botoes {
            text-align: center;
            margin-top: 20px;
        }

        /* ðŸ”¸ Todos os botÃµes e links padronizados */
        a, button {
            display: inline-block;
            width: 150px;              /* Mesmo tamanho */
            height: 45px;              /* Altura uniforme */
            line-height: 45px;         /* Centraliza texto verticalmente */
            margin: 10px;
            background-color: #d2691e;
            color: white;
            border: none;
            text-decoration: none;
            padding: 0;
            border-radius: 5px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            text-align: center;
            transition: background-color 0.2s, transform 0.1s;
        }

        a:hover, button:hover {
            background-color: #b85c16;
            transform: scale(1.03);
        }

        /* ðŸ”¸ BotÃ£o de excluir diferenciado */
        button.delete-btn {
            background-color: #d9534f;
        }
        button.delete-btn:hover {
            background-color: #c9302c;
        }

        #form-editar {
            margin-top: 30px;
            padding: 20px;
            background-color: #fff3e6;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>

{% if user.is_authenticated %}
  <p>OlÃ¡, {{ user.username }}!</p>
{% endif %}

<h1>{{ receita.nome }}</h1>

<p><strong>Categoria:</strong> {{ receita.categoria }}</p>
<p><strong>Ingredientes:</strong><br>{{ receita.ingredientes|linebreaks }}</p>
<p><strong>Modo de preparo:</strong><br>{{ receita.modo_preparo|linebreaks }}</p>

{% if receita.imagem %}
  <img src="{{ receita.imagem.url }}" width="300">
{% endif %}

{% if user.is_authenticated %}
<div class="botoes">
    <a href="{% url 'receitas:lista' %}">Voltar</a>
    <button id="btn-editar" type="button">Editar</button>

    <!-- BotÃ£o Excluir -->
    <form method="post" action="{% url 'receitas:excluir' receita.id %}" style="display:inline;">
        {% csrf_token %}
        <button type="submit" class="delete-btn"
                onclick="return confirm('Tem certeza que deseja excluir esta receita?');">
            Excluir
        </button>
    </form>
</div>

<!-- FormulÃ¡rio de ediÃ§Ã£o -->
<div id="form-editar" style="display:none;">
    <h2>Editar Receita</h2>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Salvar</button>
        <button type="button" id="btn-cancelar">Cancelar</button>
    </form>
</div>
{% endif %}

<script>
    const btnEditar = document.getElementById('btn-editar');
    const btnCancelar = document.getElementById('btn-cancelar');
    const formEditar = document.getElementById('form-editar');

    if (btnEditar && btnCancelar && formEditar) {
        btnEditar.addEventListener('click', () => formEditar.style.display = 'block');
        btnCancelar.addEventListener('click', () => formEditar.style.display = 'none');
    }
</script>

</body>
</html>
